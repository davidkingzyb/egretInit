var GameContainer=function(t){function e(){t.call(this),this.questionNum=1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),tool.setWH(this),this.createGameScene()},p.createGameScene=function(){this.bg=tool.initBitmap("bg"),tool.setBgWH(this.bg),this.addChild(this.bg),this.topcurtain=tool.initBitmap("topcurtain",0,-175),tool.setFullWidthObj(this.topcurtain),this.curtainL=tool.initBitmap("curtain",-166,0),this.curtainR=tool.initBitmap("curtain",tool.stageW+166),this.curtainR.scaleX=-1,this.bgm=tool.initSound("bgm"),this.channel=this.bgm.play(0,-1),this.musicswitch=tool.initBitmap("musicon",tool.stageW-60,60,.5,.5),tool.btnPress(this.musicswitch,this.doBgm,this),tool.addChildren([this.curtainL,this.curtainR,this.topcurtain,this.musicswitch],this),egret.Tween.get(this.topcurtain).to({y:0},500).call(function(){egret.Tween.get(this.curtainL).to({x:-20},400),egret.Tween.get(this.curtainR).to({x:tool.stageW+20},400)},this),tool.btnPress(this.topcurtain,function(){egret.Tween.get(this.topcurtain,{override:!0}).to({y:0},200)},this,null,null,function(){egret.Tween.get(this.topcurtain).to({y:-70},200)}),tool.btnPress(this.curtainL,function(){egret.Tween.get(this.curtainL,{override:!0}).to({x:-20},200)},this,null,null,function(){egret.Tween.get(this.curtainL).to({x:0},200)}),tool.btnPress(this.curtainR,function(){egret.Tween.get(this.curtainR,{override:!0}).to({x:tool.stageW+20},200)},this,null,null,function(){egret.Tween.get(this.curtainR).to({x:tool.stageW},200)}),this.startpane=new startPane,this.addChild(this.startpane),this.startpane.addEventListener("start",this.start,this)},p.start=function(){this.removeChild(this.startpane),this.questionpane=new questionPane(this.questionNum),this.addChild(this.questionpane),this.questionpane.addEventListener("next",this.next,this)},p.next=function(){this.removeChild(this.questionpane),this.questionNum+=1,this.questionNum<=10?(this.questionpane=new questionPane(this.questionNum),this.addChild(this.questionpane),this.questionpane.addEventListener("next",this.next,this)):(this.answerpane=new answerPane(questionPane.questionArr),this.addChild(this.answerpane),this.answerpane.addEventListener("again",this.again,this))},p.again=function(){this.removeChild(this.answerpane),this.questionNum=1,this.startpane=new startPane,this.addChild(this.startpane),this.startpane.addEventListener("start",this.start,this)},p.doBgm=function(){e.isBgm?(e.isBgm=!1,this.channel.volume=0,this.musicswitch.texture=RES.getRes("musicoff")):(e.isBgm=!0,this.musicswitch.texture=RES.getRes("musicon"),this.channel.volume=1)},e.isBgm=!0,e}(egret.DisplayObjectContainer);egret.registerClass(GameContainer,"GameContainer");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.loadingView=new Loading("loading"),this.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},p.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},p.onResourceLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.loadingView.isfinish?this.initGameContainer():this.loadingView.addEventListener("finish",this.initGameContainer,this)},p.initGameContainer=function(){this.removeChild(this.loadingView);var t=new GameContainer;this.addChild(t),debug.debuging()},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var animation=function(){function t(e){this.acc=0,this.dt=Number((1e3/t.FPS).toFixed(1)),this.animationArr=[],this.register(this.loop,e)}var e=__define,i=t;return p=i.prototype,p.onenterframe=function(t){-1===this.animationArr.indexOf(t)&&this.animationArr.push(t)},p.offenterframe=function(t){var e=this.animationArr.indexOf(t);-1!==e&&this.animationArr.splice(e,1)},p.loop=function(){for(var t=0;t<this.animationArr.length;t++)this.animationArr[t].call(this.context)},p.register=function(t,e){this.callback=t,this.context=e,this.acc=0},p.unregister=function(){this.callback=null,this.context=null,this.stop()},p.handle=function(t){for(this.acc+=t;this.acc>=this.dt;)this.callback.call(this),this.acc-=this.dt},p.start=function(){egret.Ticker.getInstance().register(this.handle,this)},p.stop=function(){egret.Ticker.getInstance().unregister(this.handle,this),this.acc=0,this.framerate=60,this.animationArr=[]},p.pause=function(){egret.Ticker.getInstance().unregister(this.handle,this)},p.resume=function(){egret.Ticker.getInstance().register(this.handle,this)},e(p,"framerate",void 0,function(e){t.FPS=e,this.dt=Number((1e3/e).toFixed(1))}),t.tween=function(t,e,i,n,o){function s(){o[t]+=a,a>0&&o[t]>=i&&egret.clearInterval(r),0>a&&o[t]<=i&&egret.clearInterval(r)}var a=(i-e)/(n/10),r=egret.setInterval(s,o,10);return r},t.FPS=60,t}();egret.registerClass(animation,"animation");var answerPane=function(t){function e(e){t.call(this);var i=0;if(1===e[0])if(4===e[8])switch(e[2]){case 1:i=1;break;case 2:i=2;break;case 3:i=10;break;case 4:i=10}else switch(e[8]){case 1:i=8;break;case 2:i=9;break;case 3:i=3;break;case 4:i=9}else switch(e[1]){case 1:i=5;break;case 2:i=6;break;case 3:i=7;break;case 4:i=4}this.createScene(i)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createScene=function(t){this.answer=tool.initBitmap("a"+t,tool.stageW/2,tool.stageH/2-410,.5,1),this.answerPbg=tool.initRect(16580361,tool.stageW/2-316,tool.stageH/2-170-25,632,340),this.answerP=tool.initBitmap("a"+t+"p",tool.stageW/2,tool.stageH/2-25,.5,.5),this.answerZ=tool.initBitmap("a"+t+"z",tool.stageW/2,tool.stageH/2-260,.5,.5),this.zhu=tool.initBitmap("zhu",tool.stageW/2,tool.stageH/2-330,.5,1),this.againbtn=tool.initBitmap("againbtn",tool.stageW/2,tool.stageH/2+182,.5),this.sharebtn=tool.initBitmap("sharebtn",tool.stageW/2,tool.stageH/2+290,.5),this.tubaiinfo=tool.initBitmap("tubaiinfo",tool.stageW/2,tool.stageH/2+410,.1),this.tubailogo=tool.initBitmap("tubailogo",tool.stageW/2-100,tool.stageH/2+470,.5,.5),this.zhu.alpha=0,this.answerZ.alpha=0,egret.Tween.get(this.zhu).to({alpha:1},300).call(function(){egret.Tween.get(this.answerZ).to({alpha:1},500)},this),tool.addChildren([this.answer,this.answerPbg,this.answerP,this.zhu,this.answerZ,this.sharebtn,this.againbtn,this.tubailogo,this.tubaiinfo],this),tool.btnPress(this.againbtn,this.again,this),tool.btnPress(this.sharebtn,this.share,this)},p.share=function(){this.sharebg=tool.initRect(1,0,0,tool.stageW,tool.stageH),this.sharebg.alpha=.8,this.sharepane=tool.initBitmap("sharepane",tool.stageW-50,50,1),this.moregame=tool.initTextField("-more game-",tool.stageW/2,tool.stageH-150,16777215,25,null,null,.5),tool.addChildren([this.sharebg,this.sharepane,this.moregame],this),tool.btnPress(this.moregame,this.doMoreGame,this)},p.again=function(){this.dispatchEventWith("again")},p.doMoreGame=function(){window.open("http://cubex3.sinaapp.com")},e}(egret.DisplayObjectContainer);egret.registerClass(answerPane,"answerPane");var component=function(){function t(){}var e=(__define,t);return p=e.prototype,t.airBtn=function(t,e,i,n,o,s,a,r,l,h,c){var e=e||150,i=i||60,n=n||1,o=o||1,s=s||.5,a=a||.5,r=r||16777215,h=h||3,l=l||40,c=c||"helvetica",g=new egret.Sprite;g.x=n,g.y=o,g.anchorOffsetX=g.width*s,g.anchorOffsetY=g.height*a;var u=new egret.Shape;u.graphics.beginFill(r),u.graphics.drawRect(0,0,e,i),u.graphics.endFill(),u.alpha=.01,g.addChild(u);var d=new egret.Shape;d.graphics.lineStyle(h,r),d.graphics.drawRect(0,0,e,i),d.graphics.endFill(),g.addChild(d);var f=tool.initTextField(t,e/2,i/2,r,l,c,egret.HorizontalAlign.CENTER,.5,.5);return g.addChild(f),{btn:g,bg:u,border:d,text:f}},t.airBtnPress=function(t,e,i,n){function o(){t.bg.alpha=.3,n&&n.call(i)}function s(){t.bg.alpha=.01,e.call(i)}function a(){t.bg.alpha=.01}t.btn.touchEnabled=!0,t.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o,i),t.btn.addEventListener(egret.TouchEvent.TOUCH_END,s,i),t.btn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,a,i)},t.ScorePane=function(e){var i=e.toString().length>1?e.toString().length:1.5,n=new egret.DisplayObjectContainer,o=tool.initTextField("S C O R E",tool.stageW/2,tool.stageH/2-(tool.stageW-100)/i*1.618/2-30,16777215,tool.stageW/10,"Impact",null,.5,1),s=tool.initTextField(0,tool.stageW/2,tool.stageH/2,16777215,(tool.stageW-100)/i*1.618,"Impact",null,.5,.5),a=t.airBtn("RETRY",tool.stageW/4,tool.stageW/4/3,tool.stageW/2,tool.stageH/2+(tool.stageW-100)/i*1.618/2+60,.5,0,16777215,tool.stageW/4/4*.8,null,"helvetica");return tool.addChildren([o,s,a.btn],n),{scorepane:n,title:o,scoretf:s,retrybtn:a}},t.initScorePane=function(e,i,n){function o(){function t(){i+=e,c.scoretf.text=Math.floor(i)+"",i>=r&&e>0&&(egret.clearInterval(n),c.scoretf.text=r+""),r>=i&&0>e&&(egret.clearInterval(n),c.scoretf.text=r+"")}egret.Tween.get(c.scorepane).to({alpha:1},300);var e=(r-l)/30,i=l,n=egret.setInterval(t,this,10)}function s(){egret.Tween.get(c.scorepane).to({alpha:0},200).call(function(){i.removeChild(c.scorepane),n.call(i)},this)}function a(){if("S C O R E"===c.title.text){c.title.text="B E S T  S C O R E";var t=h.toString().length>1?h.toString().length:1.5;c.scoretf.size=(tool.stageW-100)/t*1.618,l=e,r=h,o()}else{c.title.text="S C O R E";var t=e.toString().length>1?e.toString().length:1.5;c.scoretf.size=(tool.stageW-100)/t*1.618,l=h,r=e,o()}}var r=e,l=0,h=tool.setBestScore(e),c=t.ScorePane(e);c.scorepane.alpha=0,i.addChild(c.scorepane),egret.Tween.get(c.scorepane).to({alpha:.5},100).call(o,this),t.airBtnPress(c.retrybtn,s,this),tool.btnPress(c.title,a,this),tool.btnPress(c.scoretf,a,this)},t}();egret.registerClass(component,"component");var debug;!function(t){function e(t,e){function i(e){h=tool.getXY(e).x,c=tool.getXY(e).y,g=t.x,u=t.y,document.onkeydown=function(t){d=t.altKey?"alt":t.ctrlKey?"ctrl":t.shiftKey?"shift":"null"}}function n(e){"ctrl"===d&&(t.x=g+(tool.getXY(e).x-h),t.y=u+(tool.getXY(e).y-c),a.text="["+parseInt(t.x)+","+parseInt(t.y)+"]",a.x=t.x,a.y=t.y,r.x=t.x,r.y=t.y,l.x=t.x-1,l.y=t.y-1)}function o(i){if("shift"===d){var n=tool.getXY(i).x-t.x,o=tool.getXY(i).y-t.y;0>n&&(t.scaleX=-1,r.scaleX=-1,n=Math.abs(n)),0>o&&(t.scaleY=-1,r.scaleY=-1,o=Math.abs(o)),t.width=n,t.height=o,r.graphics.drawRect(0,0,t.width,t.height)}else"ctrl"===d?d="ctrl":"alt"===d&&(console.log("x",t.x,"y",t.y,"index:",e.getChildIndex(t),"width:",t.width,"height",t.height,"anchorOffsetX:",t.anchorOffsetX,"anchorOffsetY:",t.anchorOffsetY,"rotation:",t.rotation,"scaleX:",t.scaleX,"scaleY:",t.scaleY,"alpha:",t.alpha),d="null")}function s(i){if("shift"===d){var n=tool.getXY(i).x-t.x,o=tool.getXY(i).y-t.y;0>n?(t.scaleX=-1,r.scaleX=-1,n=Math.abs(n)):(t.scaleX=1,r.scaleX=1),0>o?(t.scaleY=-1,r.scaleY=-1,o=Math.abs(o)):(t.scaleY=1,r.scaleY=1),t.width=n,t.height=o,r.graphics.drawRect(0,0,t.width,t.height)}else(d="ctrl")?d="ctrl":"alt"===d&&(console.log("index:",e.getChildIndex(t),"width:",t.width,"height",t.height,"anchorOffsetX:",t.anchorOffsetX,"anchorOffsetY:",t.anchorOffsetY,"rotation:",t.rotation,"scaleX:",t.scaleX,"scaleY:",t.scaleY,"alpha:",t.alpha),d="null")}var a=tool.initTextField("["+t.x+","+t.y+"]",t.x,t.y);e.addChild(a);var r=new egret.Shape;r.graphics.lineStyle(1,16711680),r.graphics.drawRect(0,0,t.width,t.height),r.graphics.endFill(),r.x=t.x,r.y=t.y,r.anchorOffsetX=t.anchorOffsetX,r.anchorOffsetY=t.anchorOffsetY,e.addChild(r);var l=new egret.Shape;l.graphics.beginFill(16711680),l.graphics.drawCircle(0,0,3),l.graphics.endFill(),l.x=t.x-1,l.y=t.y-1,e.addChild(l),console.log("stageW=",tool.stageW,"stageH=",tool.stageH),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i,e,!1),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,n,e,!1),t.addEventListener(egret.TouchEvent.TOUCH_END,o,e,!1),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,s,e,!1);var h,c,g,u,d="null"}function i(e){for(var i=e.numChildren,n=0;i>n;n++){var o=e.getChildAt(n);t.showPosition(o,e)}}function n(e,i){for(var n=0;n<e.length;n++)t.showPosition(e[n],i)}function o(){egret.Ticker.getInstance().pause()}function s(){egret.Ticker.getInstance().resume()}function a(){}function r(){t.showDebug(),window&&(window.ei_debuging=!0,window.ei_pause=function(){t.pause()},window.ei_resume=function(){t.resume()})}function l(t,e,i,n){void 0===i&&(i=[]),void 0===n&&(n="test"),window.ei_debuging&&(console.log("unit test: "+n+"()"),window[n]=function(n){var o;o=n?n:i,t.apply(e,o)})}t.showPosition=e,t.showAllPosition=i,t.showGroupPosition=n,t.pause=o,t.resume=s,t.showDebug=a,t.debuging=r,t.unitTest=l}(debug||(debug={}));var Loading=function(t){function e(e){t.call(this),this.isfinish=!1,this.mood="loading",this.current=0,this.total=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.mood=e||"loading"}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),tool.setWH(this),this.createView()},p.createView=function(){this.bg=tool.initRect(2236962,0,0,tool.stageW,tool.stageH),this.addChild(this.bg),this.textField=tool.initTextField("",tool.stageW/2,tool.stageH-100,16777215,25,"helvetica",egret.HorizontalAlign.CENTER,.5,1),"stinger"===this.mood&&(this.textField.text="Î” by DKZ\nhttps://davidkingzyb.github.io\n",tool.resetAnchor(this.textField,.5,1)),this.addChild(this.textField),this.doLogo()},p.doLogo=function(){function t(t,e,i,o){void 0===o&&(o=16777215),t.lineStyle(2,o);for(var s=1;21>=s;s++)n["drawWhite"+s](t,e,i);for(var a=1;5>=a;a++)n["drawBlack"+a](t,e,i);for(var r=1;4>=r;r++)n["drawGrey"+r](t,e,i)}function e(e,o,s,a){function r(){e.beginFill(13421772),n["drawWhite"+g](e,o,s),e.endFill(),g++,21>=g&&egret.setTimeout(arguments.callee,a,100)}function l(){e.beginFill(7829367),n["drawGrey"+u](e,o,s),e.endFill(),u++,4>=u&&egret.setTimeout(arguments.callee,a,700)}function h(){e.beginFill(3355443),n["drawBlack"+d](e,o,s),e.endFill(),d++,5>=d&&egret.setTimeout(arguments.callee,a,550)}function c(){i(a.logo.graphics,o,s,a)}t(e,o,s,1);var g=1;r();var u=1;l();var d=1;h(),"stinger"!==a.mood?egret.setTimeout(a.finish,a,3500):(a.logo.touchEnabled=!0,a.logo.addEventListener(egret.TouchEvent.TOUCH_TAP,c,a))}function i(t,e,i,o){function s(){var s=Math.random();t.beginFill(16777215*Math.random()),.2>s?n["drawGrey"+Math.ceil(4*Math.random())](t,e,i):.4>s?n["drawBlack"+Math.ceil(5*Math.random())](t,e,i):n["drawWhite"+Math.ceil(21*Math.random())](t,e,i),t.endFill(),a++,50>a&&egret.setTimeout(arguments.callee,o,50)}var a=0;s()}var n={drawWhite1:function(t,e,i){t.moveTo(1*e,7*i),t.lineTo(1*e,15*i),t.lineTo(2*e,16*i),t.lineTo(2*e,8*i),t.lineTo(1*e,7*i)},drawWhite2:function(t,e,i){t.moveTo(1*e,7*i),t.lineTo(3*e,5*i),t.lineTo(3*e,7*i),t.lineTo(2*e,8*i),t.lineTo(1*e,7*i)},drawWhite3:function(t,e,i){t.moveTo(3*e,5*i),t.lineTo(3*e,7*i),t.lineTo(4*e,6*i),t.lineTo(3*e,5*i)},drawWhite4:function(t,e,i){t.moveTo(4*e,6*i),t.lineTo(3*e,7*i),t.lineTo(4*e,8*i),t.lineTo(4*e,6*i)},drawWhite5:function(t,e,i){t.moveTo(4*e,6*i),t.lineTo(5*e,7*i),t.lineTo(4*e,8*i),t.lineTo(4*e,6*i)},drawWhite6:function(t,e,i){t.moveTo(5*e,7*i),t.lineTo(4*e,8*i),t.lineTo(4*e,12*i),t.lineTo(5*e,11*i),t.lineTo(5*e,7*i)},drawWhite7:function(t,e,i){t.moveTo(4*e,12*i),t.lineTo(3*e,13*i),t.lineTo(4*e,14*i),t.lineTo(4*e,12*i)},drawWhite8:function(t,e,i){t.moveTo(4*e,14*i),t.lineTo(2*e,16*i),t.lineTo(2*e,8*i),t.lineTo(3*e,7*i),t.lineTo(4*e,8*i),t.lineTo(3*e,9*i),t.lineTo(3*e,13*i),t.lineTo(4*e,14*i)},drawWhite9:function(t,e,i){t.moveTo(4*e,12*i),t.lineTo(5*e,13*i),t.lineTo(5*e,11*i),t.lineTo(4*e,12*i)},drawWhite10:function(t,e,i){t.moveTo(4*e,4*i),t.lineTo(5*e,5*i),t.lineTo(5*e,7*i),t.lineTo(4*e,6*i),t.lineTo(4*e,4*i)},drawWhite11:function(t,e,i){t.moveTo(4*e,4*i),t.lineTo(5*e,3*i),t.lineTo(6*e,4*i),t.lineTo(5*e,5*i),t.lineTo(4*e,4*i)},drawWhite12:function(t,e,i){t.moveTo(5*e,5*i),t.lineTo(6*e,4*i),t.lineTo(6*e,6*i),t.lineTo(7*e,5*i),t.lineTo(7*e,7*i),t.lineTo(8*e,6*i),t.lineTo(8*e,10*i),t.lineTo(7*e,11*i),t.lineTo(7*e,9*i),t.lineTo(6*e,10*i),t.lineTo(6*e,12*i),t.lineTo(5*e,13*i),t.lineTo(5*e,5*i)},drawWhite13:function(t,e,i){t.moveTo(6*e,2*i),t.lineTo(7*e,1*i),t.lineTo(8*e,2*i),t.lineTo(7*e,3*i),t.lineTo(6*e,2*i)},drawWhite14:function(t,e,i){t.moveTo(7*e,3*i),t.lineTo(8*e,2*i),t.lineTo(8*e,4*i),t.lineTo(7*e,5*i),t.lineTo(7*e,3*i)},drawWhite15:function(t,e,i){t.moveTo(8*e,2*i),t.lineTo(9*e,1*i),t.lineTo(12*e,4*i),t.lineTo(11*e,5*i),t.lineTo(8*e,2*i)},drawWhite16:function(t,e,i){t.moveTo(12*e,4*i),t.lineTo(12*e,8*i),t.lineTo(11*e,7*i),t.lineTo(11*e,5*i),t.lineTo(12*e,4*i)},drawWhite17:function(t,e,i){t.moveTo(12*e,8*i),t.lineTo(11*e,9*i),t.lineTo(11*e,7*i),t.lineTo(12*e,8*i)},drawWhite18:function(t,e,i){t.moveTo(11*e,9*i),t.lineTo(10*e,8*i),t.lineTo(11*e,7*i),t.lineTo(11*e,9*i)},drawWhite19:function(t,e,i){t.moveTo(10*e,8*i),t.lineTo(11*e,7*i),t.lineTo(11*e,5*i),t.lineTo(8*e,2*i),t.lineTo(8*e,4*i),t.lineTo(10*e,6*i),t.lineTo(10*e,8*i)},drawWhite20:function(t,e,i){t.moveTo(8*e,6*i),t.lineTo(8*e,10*i),t.lineTo(11*e,13*i),t.lineTo(11*e,11*i),t.lineTo(10*e,10*i),t.lineTo(10*e,8*i),t.lineTo(8*e,6*i)},drawWhite21:function(t,e,i){t.moveTo(11*e,13*i),t.lineTo(12*e,12*i),t.lineTo(12*e,10*i),t.lineTo(11*e,11*i),t.lineTo(11*e,13*i)},drawBlack5:function(t,e,i){t.moveTo(12*e,10*i),t.lineTo(11*e,11*i),t.lineTo(10*e,10*i),t.lineTo(11*e,9*i),t.lineTo(12*e,10*i)},drawBlack4:function(t,e,i){t.moveTo(9*e,5*i),t.lineTo(8*e,6*i),t.lineTo(10*e,8*i),t.lineTo(10*e,6*i),t.lineTo(9*e,5*i)},drawBlack1:function(t,e,i){t.moveTo(3*e,11*i),t.lineTo(4*e,12*i),t.lineTo(3*e,13*i),t.lineTo(3*e,11*i)},drawBlack2:function(t,e,i){t.moveTo(6*e,4*i),t.lineTo(7*e,5*i),t.lineTo(6*e,6*i),t.lineTo(6*e,4*i)},drawBlack3:function(t,e,i){t.moveTo(7*e,5*i),t.lineTo(8*e,6*i),t.lineTo(7*e,7*i),t.lineTo(7*e,5*i)},drawGrey1:function(t,e,i){t.moveTo(4*e,8*i),t.lineTo(4*e,12*i),t.lineTo(3*e,11*i),t.lineTo(3*e,9*i),t.lineTo(4*e,8*i)},drawGrey2:function(t,e,i){t.moveTo(6*e,10*i),t.lineTo(7*e,9*i),t.lineTo(7*e,11*i),t.lineTo(6*e,10*i)},drawGrey3:function(t,e,i){t.moveTo(6*e,2*i),t.lineTo(6*e,4*i),t.lineTo(7*e,5*i),t.lineTo(7*e,3*i),t.lineTo(6*e,2*i)},drawGrey4:function(t,e,i){t.moveTo(11*e,9*i),t.lineTo(10*e,10*i),t.lineTo(10*e,8*i),t.lineTo(11*e,9*i)}};this.logo=new egret.Shape,this.logo.graphics.clear();var o=20*Math.sqrt(3),s=20;t(this.logo.graphics,o,s),this.logo.x=tool.stageW/2,this.logo.y=tool.stageH/2-100,this.logo.anchorOffsetX=13*o*.5,this.logo.anchorOffsetY=15*s*.5,this.addChild(this.logo),e(this.logo.graphics,o,s,this)},p.finish=function(){function t(){this.dispatchEventWith("finish")}this.isfinish=!0,this.total===this.current?(egret.Tween.get(this.textField).to({alpha:0},400),egret.Tween.get(this.logo).to({alpha:0},500).call(t,this)):egret.setTimeout(this.finish,this,1e3)},p.setProgress=function(t,e){this.current=t,this.total=e,this.textField.text="Loading..."+t+"/"+e,tool.resetAnchor(this.textField,.5,1)},e}(egret.DisplayObjectContainer);egret.registerClass(Loading,"Loading");var questionPane=function(t){function e(e){t.call(this),this.num=e,this.createScene()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createScene=function(){this.questionT=tool.initBitmap("q"+this.num+"t",tool.stageW/2,240,.5,.5),this.question=tool.initBitmap("q"+this.num,tool.stageW/2,360,.5),this.questionT.scaleX=.1,this.questionT.scaleY=.1,this.question.alpha=0,tool.addChildren([this.questionT,this.question],this),egret.Tween.get(this.questionT).to({scaleY:1,scaleX:1},500),egret.Tween.get(this.question).to({alpha:1},1e3).call(this.show,this)},p.show=function(){1===this.num?(this.questionA=tool.initBitmap("q"+this.num+"_0",tool.stageW/2-150,tool.stageH/2+150,.5,.5),this.questionB=tool.initBitmap("q"+this.num+"_1",tool.stageW/2+150,tool.stageH/2+150,.5,.5),this.questionA.scaleX=0,this.questionA.scaleY=0,this.questionB.scaleX=0,this.questionB.scaleY=0,tool.addChildren([this.questionA,this.questionB],this),egret.Tween.get(this.questionA).to({scaleX:1,scaleY:1},300).call(function(){egret.Tween.get(this.questionB).to({scaleX:1,scaleY:1},300)},this),this.btnPress(this.questionA,function(){e.questionArr[this.num-1]=1,this.next()},this),this.btnPress(this.questionB,function(){e.questionArr[this.num-1]=2,this.next()},this)):(this.questionA=tool.initBitmap("q"+this.num+"_0",tool.stageW/2-150,tool.stageH/2+100,.5,.5),this.questionB=tool.initBitmap("q"+this.num+"_1",tool.stageW/2+150,tool.stageH/2+100,.5,.5),this.questionC=tool.initBitmap("q"+this.num+"_2",tool.stageW/2-150,tool.stageH/2+400,.5,.5),this.questionD=tool.initBitmap("q"+this.num+"_3",tool.stageW/2+150,tool.stageH/2+400,.5,.5),this.questionA.scaleX=0,this.questionA.scaleY=0,this.questionB.scaleX=0,this.questionB.scaleY=0,this.questionC.scaleY=0,this.questionC.scaleX=0,this.questionD.scaleY=0,this.questionD.scaleX=0,tool.addChildren([this.questionA,this.questionB,this.questionC,this.questionD],this),egret.Tween.get(this.questionA).to({scaleX:1,scaleY:1},200).call(function(){egret.Tween.get(this.questionB).to({scaleX:1,scaleY:1},200).call(function(){egret.Tween.get(this.questionC).to({scaleY:1,scaleX:1},200).call(function(){egret.Tween.get(this.questionD).to({scaleY:1,scaleX:1},200)},this)},this)},this),this.btnPress(this.questionA,function(){e.questionArr[this.num-1]=1,this.next()},this),this.btnPress(this.questionB,function(){e.questionArr[this.num-1]=2,this.next()},this),this.btnPress(this.questionC,function(){e.questionArr[this.num-1]=3,this.next()},this),this.btnPress(this.questionD,function(){e.questionArr[this.num-1]=4,this.next()},this))},p.next=function(){this.dispatchEventWith("next")},p.btnPress=function(t,e,i,n){function o(){egret.Tween.get(t,{override:!0}).to({scaleY:.9,scaleX:.9},100).call(function(){n&&n.call(i)},i)}function s(){egret.Tween.get(t,{override:!0}).to({scaleY:1.1,scaleX:1.1},100).call(function(){e.call(i)},i)}function a(){egret.Tween.get(t).to({scaleY:1,scaleX:1},200)}t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o,i),t.addEventListener(egret.TouchEvent.TOUCH_END,s,i),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,a,i)},e.questionArr=[0,0,0,0,0,0,0,0,0,0],e}(egret.DisplayObjectContainer);egret.registerClass(questionPane,"questionPane");var startPane=function(t){function e(){t.call(this),this.createScene()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createScene=function(){this.man=tool.initBitmap("man",tool.stageW/2,tool.stageH,.5,1),tool.setFullWidthObj(this.man),this.title=tool.initBitmap("title",tool.stageW/2,tool.stageH/2-50,.5,.5),this.from=tool.initBitmap("from",tool.stageW/2,tool.stageH/2-550,.5),this.startbtn=tool.initBitmap("startbtn",tool.stageW/2,tool.stageH/2+400,.5),this.alert=tool.initBitmap("alert",this.startbtn.x+140,this.startbtn.y+50),this.title.alpha=0,this.startbtn.alpha=0,this.alert.alpha=0,this.from.y=-200,tool.addChildren([this.man,this.title,this.from,this.startbtn,this.alert],this),egret.Tween.get(this.title).to({alpha:1},1500).call(function(){egret.Tween.get(this.from).to({y:tool.stageH/2-550},300).call(function(){egret.Tween.get(this.startbtn).to({alpha:1},600).call(function(){egret.Tween.get(this.alert).to({alpha:0},3e3).to({alpha:1},500)},this)},this)},this),tool.btnPress(this.startbtn,function(){this.dispatchEventWith("start")},this)},e}(egret.DisplayObjectContainer);egret.registerClass(startPane,"startPane");var tool=function(){function t(){}var e=(__define,t);return p=e.prototype,t.setWH=function(e){t.stageW=e.stage.stageWidth,t.stageH=e.stage.stageHeight,t.stinger(e)},t.initBitmap=function(t,e,i,n,o){var s=new egret.Bitmap;return s.texture=RES.getRes(t),s.x=e?e:0,s.y=i?i:0,s.anchorOffsetX=n?s.width*n:0,s.anchorOffsetY=o?s.height*o:0,s},t.initMovieClip=function(t,e,i,n,o){var s=RES.getRes(t+"MC"),a=RES.getRes(t),r=new egret.MovieClipDataFactory(s,a),l=new egret.MovieClip(r.generateMovieClipData(t));return l.x=e?e:0,l.y=i?i:0,l.anchorOffsetX=n?l.width*n:0,l.anchorOffsetY=o?l.height*o:0,l},t.changeMovieClipData=function(t,e){t.stop();var i=RES.getRes(e+"MC"),n=RES.getRes(e),o=new egret.MovieClipDataFactory(i,n);t.movieClipData=o.generateMovieClipData(e)},t.initTextField=function(t,e,i,n,o,s,a,r,l,h){var c=new egret.TextField;return c.text=t+"",c.x=e?e:0,c.y=i?i:0,c.textColor=n?n:16777215,c.size=o?o:30,c.fontFamily=s?s:"SimHei",c.anchorOffsetX=c.width*r||0,c.anchorOffsetY=c.height*l||0,c.textAlign=a||egret.HorizontalAlign.LEFT,c.lineSpacing=h||0,c},t.resetAnchor=function(t,e,i){t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*i},t.initBitmapText=function(t,e,i,n,o,s){var a=new egret.BitmapText;return a.font=RES.getRes(t+"Font"),a.text=""+e,a.x=i?i:0,a.y=n?n:0,a.anchorOffsetX=o?a.width*o:0,a.anchorOffsetY=s?a.height*s:0,a},t.initScale9GridBitmap=function(t,e,i,n,o,s,a,r,l,h,c){var g=new egret.Bitmap;g.texture=RES.getRes(t);var u=new egret.Rectangle(e,i,n,o);return g.scale9Grid=u,g.width=s?s:0,g.height=a?a:0,g.x=r?r:0,g.y=l?l:0,g.anchorOffsetX=h?g.width*h:0,g.anchorOffsetY=c?g.height*c:0,g},t.initSound=function(t){return RES.getRes(t)},t.initRect=function(t,e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var s=new egret.Shape;return s.graphics.beginFill(t),s.graphics.drawRect(e,i,n,o),s.graphics.endFill(),s},t.getXY=function(t){var e=t.stageX,i=t.stageY;return{x:e,y:i}},t.addChildren=function(t,e){for(var i=0;i<t.length;i++)e.addChild(t[i])},t.removeChildren=function(t,e){for(var i=0;i<t.length;i++)e.contains(t[i])&&e.removeChild(t[i])},t.test2RectHit=function(t,e){return Math.max(t.x,e.x)<=Math.min(t.x+t.width,e.x+e.width)&&Math.max(t.y,e.y)<=Math.min(t.y+t.height,e.y+e.height)},t.test2PointHit=function(t,e,i){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)<i*i},t.getData=function(t,e,i){function n(t){i(o.data)}var o=new egret.URLLoader;o.addEventListener(egret.Event.COMPLETE,n,this);var s=new egret.URLRequest;s.url=t,s.requestHeaders=[new egret.URLRequestHeader("Access-Control-Allow-Origin","*")],e&&(s.method=egret.URLRequestMethod.POST,s.data=new egret.URLVariables(e)),o.load(s)},t.ajax=function(t,e,i,n,o,s){function a(){i.call(o,l.data)}function r(){n.call(o)}var l=new egret.URLLoader;l.addEventListener(egret.Event.COMPLETE,a,this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,r,this);var h=new egret.URLRequest;h.url=t,h.requestHeaders=[new egret.URLRequestHeader("Access-Control-Allow-Origin","*")],"post"===s&&(h.method=egret.URLRequestMethod.POST),h.data=new egret.URLVariables(e),l.load(h)},t.randomInt=function(t){return Math.floor(Math.random()*t)},t.btnPress=function(t,e,i,n,o,s){function a(){n&&(t.texture=RES.getRes(n)),s&&s.call(i)}function r(){o&&(t.texture=RES.getRes(o)),e.call(i)}function l(){o&&(t.texture=RES.getRes(o))}t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,i),t.addEventListener(egret.TouchEvent.TOUCH_END,r,i),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,l,i)},t.setBestScore=function(t){var e;return egret.localStorage.getItem("bestScore")?(e=Number(egret.localStorage.getItem("bestScore")),t>e&&(e=t,egret.localStorage.setItem("bestScore",e+""))):(e=t,egret.localStorage.setItem("bestScore",e+"")),e},t.dolocalStorage=function(t,e,i){return void 0===i&&(i="0"),egret.localStorage.getItem(t)?e?(egret.localStorage.setItem(t,e),egret.localStorage.getItem(t)):egret.localStorage.getItem(t):e?(egret.localStorage.setItem(t,e),egret.localStorage.getItem(t)):(egret.localStorage.setItem(t,i),egret.localStorage.getItem(t))},t.setFullWidthObj=function(e,i,n){if(e){var o=i||e.texture.textureWidth,s=n||e.texture.textureHeight;e.width=t.stageW,e.height=t.stageW*s/o}},t.setBgWH=function(e){e&&(e.width=t.stageW,e.height=t.stageH)},t.forMatrix=function(t,e,i,n,o){void 0===i&&(i=[]),void 0===n&&(n=6),void 0===o&&(o=6);for(var s=0;n>s;s++)for(var a=0;o>a;a++){var r=[s,a];r.push(i),t.apply(e,r)}},t.stinger=function(e){function i(i){a=!1,r=!1,l=!1;var s=t.getXY(i).x,h=t.getXY(i).y;s>t.stageW/2-50&&s<t.stageW/2+50&&100>h&&(e.addEventListener(egret.TouchEvent.TOUCH_MOVE,n,e),e.addEventListener(egret.TouchEvent.TOUCH_END,o,e))}function n(e){var i=t.getXY(e).x,n=t.getXY(e).y;100>i&&n>t.stageH-100&&(r=!0),i>t.stageW-100&&n>t.stageH-100&&r&&(l=!0),i>t.stageW/2-50&&i<t.stageW/2+50&&100>n&&r&&l&&(a=!0)}function o(t){a&&r&&l&&s(e)}function s(t){for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(0);t.removeChild(n)}var o=new Loading("stinger");t.addChild(o)}var a=!1,r=!1,l=!1;e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i,e)},t}();egret.registerClass(tool,"tool");